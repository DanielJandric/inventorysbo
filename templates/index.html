<!DOCTYPE html>
<html lang="fr" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BONVIN - Collection Privée</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/static/Bonvin_180x180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/BONVIN_152X152 (1).PNG">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/BONVIN_120X120.PNG">
    
    <!-- Icône par défaut pour navigateurs (utilise la 180x180) -->
    <link rel="icon" href="/static/Bonvin_180x180.png">
    
    <!-- Configuration iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="BONVIN">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0A232A;
            --glass-bg: rgba(10, 50, 60, 0.25);
            --glass-border: rgba(0, 200, 220, 0.2);
            --glass-glow: rgba(0, 220, 255, 0.15);
            --text-primary: #e0e6e7;
            --text-secondary: #88a0a8;
        }
        html { scroll-behavior: smooth; }
        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: radial-gradient(circle at 15% 25%, rgba(0, 220, 255, 0.2), transparent 40%),
                        radial-gradient(circle at 85% 75%, rgba(10, 50, 60, 0.3), transparent 40%);
            z-index: -1;
            animation: moveGradient 20s linear infinite alternate;
            filter: blur(50px);
        }
        @keyframes moveGradient {
            from { transform: translate(0, 0); }
            to { transform: translate(5vw, -5vh); }
        }
        .glowing-element { position: relative; transition: all 0.4s ease; }
        .glowing-element::before {
            content: ''; position: absolute; left: 0; top: 0;
            width: 100%; height: 100%;
            border-radius: inherit;
            background: radial-gradient(circle at 50% 50%, var(--glass-glow), transparent 70%);
            filter: blur(30px); opacity: 0.6; z-index: -1;
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .glowing-element:hover::before, .glowing-element.is-active::before { opacity: 1; }
        
        /* STYLES GRIS BRILLANTS POUR LA CARTE VALEUR DISPONIBLE */
        .golden-card {
            background: rgba(209, 213, 219, 0.15) !important;
            border: 1px solid rgba(209, 213, 219, 0.3) !important;
            box-shadow: 0 10px 30px rgba(209, 213, 219, 0.25) !important;
        }
        
        .golden-card::before {
            background: radial-gradient(circle at 50% 50%, rgba(209, 213, 219, 0.3), transparent 70%) !important;
        }
        
        .golden-card:hover {
            background: rgba(209, 213, 219, 0.22) !important;
            border-color: rgba(209, 213, 219, 0.4) !important;
            box-shadow: 0 15px 40px rgba(209, 213, 219, 0.35) !important;
        }
        
        .golden-icon {
            background: rgba(209, 213, 219, 0.25) !important;
            border: 1px solid rgba(209, 213, 219, 0.35) !important;
            color: #E5E7EB !important;
        }
        
        .golden-text {
            color: #E5E7EB !important;
        }
        
        .golden-value {
            color: #F9FAFB !important;
            text-shadow: 0 0 8px rgba(209, 213, 219, 0.5) !important;
        }
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 1.5rem;
        }
        .glass-dark {
            background: rgba(10, 40, 50, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 1.5rem;
        }
        .glass-subtle {
            background: rgba(10, 35, 45, 0.3);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 1.5rem;
        }
        
        /* STATUS BADGES */
        .status-available{background:rgba(22, 163, 74, 0.2); border:1px solid rgba(22, 163, 74, 0.4); color: #4ade80;}
        .status-sold{background:rgba(234, 88, 12, 0.2); border:1px solid rgba(234, 88, 12, 0.4); color: #fb923c;}
        .status-for-sale{background:rgba(220, 38, 38, 0.15); border:1px solid rgba(220, 38, 38, 0.3); color: #f87171; animation: pulse-sale 2s infinite;}
        .status-sale-progress {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.4);
            color: #60a5fa;
            font-size: 10px;
            animation: pulse-progress 2s infinite;
        }
        @keyframes pulse-sale { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        @keyframes pulse-progress { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
        
        /* FILTRES GLASSMORPHIQUES PURS */
        .main-filter-btn {
            transition: all 0.3s ease;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 500;
            font-size: 0.875rem;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(15px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .main-filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .main-filter-btn.active {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2);
        }
        
        /* COULEURS TRANSPARENTES */
        .filter-all { 
            background: rgba(100, 116, 139, 0.15);
            border: 1px solid rgba(100, 116, 139, 0.25);
            color: #94a3b8;
        }
        .filter-available { 
            background: rgba(22, 163, 74, 0.15);
            border: 1px solid rgba(22, 163, 74, 0.25);
            color: #4ade80;
        }
        .filter-for-sale { 
            background: rgba(220, 38, 38, 0.15);
            border: 1px solid rgba(220, 38, 38, 0.25);
            color: #f87171;
        }
        .filter-sold { 
            background: rgba(234, 88, 12, 0.15);
            border: 1px solid rgba(234, 88, 12, 0.25);
            color: #fb923c;
        }
        
        /* HOVER EFFECTS */
        .filter-all:hover { 
            background: rgba(100, 116, 139, 0.25);
            border-color: rgba(100, 116, 139, 0.4);
        }
        .filter-available:hover { 
            background: rgba(22, 163, 74, 0.25);
            border-color: rgba(22, 163, 74, 0.4);
        }
        .filter-for-sale:hover { 
            background: rgba(220, 38, 38, 0.25);
            border-color: rgba(220, 38, 38, 0.4);
        }
        .filter-sold:hover { 
            background: rgba(234, 88, 12, 0.25);
            border-color: rgba(234, 88, 12, 0.4);
        }
        
        /* ACTIVE STATES */
        .filter-all.active { 
            background: rgba(100, 116, 139, 0.35);
            border-color: rgba(100, 116, 139, 0.6);
            box-shadow: 0 0 25px rgba(100, 116, 139, 0.3);
        }
        .filter-available.active { 
            background: rgba(22, 163, 74, 0.35);
            border-color: rgba(22, 163, 74, 0.6);
            box-shadow: 0 0 25px rgba(22, 163, 74, 0.3);
        }
        .filter-for-sale.active { 
            background: rgba(220, 38, 38, 0.35);
            border-color: rgba(220, 38, 38, 0.6);
            box-shadow: 0 0 25px rgba(220, 38, 38, 0.3);
            animation: pulse-filter-active 2s infinite;
        }
        .filter-sold.active { 
            background: rgba(234, 88, 12, 0.35);
            border-color: rgba(234, 88, 12, 0.6);
            box-shadow: 0 0 25px rgba(234, 88, 12, 0.3);
        }
        
        @keyframes pulse-filter-active {
            0%, 100% { 
                background: rgba(220, 38, 38, 0.35);
                box-shadow: 0 0 25px rgba(220, 38, 38, 0.3);
            }
            50% { 
                background: rgba(220, 38, 38, 0.45);
                box-shadow: 0 0 35px rgba(220, 38, 38, 0.5);
            }
        }
        
        /* CARTES */
        .card-for-sale {
            background: rgba(220, 38, 38, 0.08);
            border: 1px solid rgba(220, 38, 38, 0.2);
            box-shadow: 0 25px 50px -12px rgba(220, 38, 38, 0.15);
        }
        .card-for-sale::before {
            background: radial-gradient(circle at 50% 50%, rgba(220, 38, 38, 0.1), transparent 70%);
        }
        .card-for-sale:hover {
            box-shadow: 0 45px 70px -15px rgba(220, 38, 38, 0.25);
        }
        
        .card-sold {
            background: rgba(234, 88, 12, 0.05);
            border: 1px solid rgba(234, 88, 12, 0.15);
        }
        
        /* CARTES D'ACTIONS - GRIS DORÉ SUBTIL */
        .card-stock {
            background: rgba(120, 113, 108, 0.12);
            border: 1px solid rgba(168, 162, 158, 0.25);
            box-shadow: 0 25px 50px -12px rgba(120, 113, 108, 0.2);
            backdrop-filter: blur(15px);
        }
        .card-stock::before {
            background: radial-gradient(circle at 50% 50%, rgba(168, 162, 158, 0.08), transparent 70%);
        }
        .card-stock:hover {
            background: rgba(120, 113, 108, 0.18);
            border-color: rgba(168, 162, 158, 0.35);
            box-shadow: 0 45px 70px -15px rgba(120, 113, 108, 0.3);
            transform: translateY(-5px);
        }
        .card-stock .stock-price-live {
            background: rgba(120, 113, 108, 0.15);
            border: 1px solid rgba(168, 162, 158, 0.2);
        }
        
        /* BOUTON DE MISE À JOUR DES PRIX - GRIS DORÉ AVEC SURBRILLANCE */
        .stock-update-btn {
            background: rgba(120, 113, 108, 0.25);
            border: 1px solid rgba(168, 162, 158, 0.4);
            color: #fbbf24;
            box-shadow: 0 10px 25px rgba(120, 113, 108, 0.3);
            backdrop-filter: blur(15px);
        }
        .stock-update-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 50% 50%, rgba(251, 191, 36, 0.15), transparent 70%);
            border-radius: inherit;
            z-index: -1;
        }
        .stock-update-btn:hover {
            background: rgba(120, 113, 108, 0.35);
            border-color: rgba(168, 162, 158, 0.6);
            color: #f59e0b;
            box-shadow: 0 15px 35px rgba(120, 113, 108, 0.4), 0 0 20px rgba(251, 191, 36, 0.3);
            transform: translateY(-2px);
        }
        .stock-update-btn:active {
            transform: translateY(0);
            box-shadow: 0 8px 20px rgba(120, 113, 108, 0.3);
        }
        
        .floating-card {
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
            transform: perspective(1000px); cursor: pointer;
            opacity: 0; transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out, box-shadow 0.3s ease-in-out;
        }
        .floating-card.is-visible { opacity: 1; transform: translateY(0); }
        .floating-card.is-visible:hover { transform: perspective(1000px) translateY(-10px) rotateX(2deg); box-shadow: 0 45px 70px -15px rgba(0,0,0,0.6); }
        
        /* STATS */
        .stat-card { 
            padding: 1.5rem; 
            display: flex; 
            align-items: center; 
            gap: 1rem;
            position: relative;
            transform: translateY(0);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: statFloat 4s ease-in-out infinite;
            cursor: pointer;
        }
        .stat-card:nth-child(1) { animation-delay: 0s; }
        .stat-card:nth-child(2) { animation-delay: 0.5s; }
        .stat-card:nth-child(3) { animation-delay: 1s; }
        .stat-card:nth-child(4) { animation-delay: 1.5s; }
        .stat-card:nth-child(5) { animation-delay: 2s; }
        .stat-card:nth-child(6) { animation-delay: 2.5s; }

        @keyframes statFloat {
            0%, 100% { 
                transform: translateY(0) rotateX(0deg) rotateY(0deg);
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            }
            50% { 
                transform: translateY(-5px) rotateX(1deg) rotateY(1deg);
                box-shadow: 0 35px 60px -15px rgba(0, 0, 0, 0.6);
            }
        }

        .stat-card:hover {
            transform: translateY(-10px) scale(1.03) rotateX(2deg) rotateY(2deg);
            box-shadow: 0 45px 70px -15px rgba(0, 0, 0, 0.7);
            z-index: 10;
        }

        .stat-card:hover .stat-icon {
            transform: scale(1.1) rotate(5deg);
            background: rgba(0, 220, 255, 0.2);
        }

        .stat-card:hover .stat-value {
            transform: scale(1.05);
        }

        .stat-card:active {
            transform: translateY(-8px) scale(1.02);
            transition: all 0.1s ease;
        }

        .stat-icon { 
            background: rgba(0, 220, 255, 0.1); 
            border-radius: 9999px; 
            padding: 0.75rem; 
            flex-shrink: 0; 
            color: #00e5ff;
            transition: all 0.3s ease;
        }
        .stat-title { 
            font-size: 0.9rem; 
            font-weight: 500; 
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }
        .stat-value { 
            font-size: 1.8rem; 
            font-weight: 800; 
            line-height: 1.2; 
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        
        /* MODALS */
        .modal-backdrop{background:rgba(0,0,0,0.7);backdrop-filter:blur(5px)}
        .modal-content{background:rgba(10, 30, 40, 0.9);backdrop-filter:blur(20px);border:1px solid var(--glass-border)}
        .skeleton-card { background: var(--glass-bg); border-radius: 1.5rem; padding: 1.5rem; height: 230px; display: flex; flex-direction: column; }
        .skeleton-line { background: rgba(255,255,255,0.1); border-radius: 0.5rem; animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 50% { opacity: .5; } }
        
        /* CHATBOT */
        #chatbot-button {
            position: fixed; bottom: 2rem; right: 2rem;
            width: 65px; height: 65px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; z-index: 1000;
            transition: all 0.3s ease;
            animation: float 3s ease-in-out infinite;
            box-shadow: 0 10px 30px rgba(0, 229, 255, 0.4);
        }
        
        /* Classe pour cacher le bouton chat */
        #chatbot-button.chat-hidden {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            pointer-events: none !important;
            transform: scale(0) !important;
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        #chatbot-button:hover { transform: scale(1.1); box-shadow: 0 15px 40px rgba(0, 229, 255, 0.6); }
        
        #chatbot-window {
            position: fixed; bottom: 7rem; right: 2rem;
            width: 400px; height: 550px; border-radius: 2rem;
            z-index: 999; display: flex; flex-direction: column;
            overflow: hidden; transform: translateY(20px) scale(0.95);
            opacity: 0; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
        }
        #chatbot-window.is-open { transform: translateY(0) scale(1); opacity: 1; pointer-events: auto; }
        
        /* AMÉLIORATIONS CHATBOT STREAMING */
        #chatbot-messages { 
            flex-grow: 1; 
            padding: 1.5rem; 
            overflow-y: auto; 
            scroll-behavior: smooth;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        #chatbot-messages::-webkit-scrollbar {
            width: 6px;
        }
        
        #chatbot-messages::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }
        
        #chatbot-messages::-webkit-scrollbar-thumb {
            background: rgba(34, 211, 238, 0.3);
            border-radius: 3px;
        }
        
        #chatbot-messages::-webkit-scrollbar-thumb:hover {
            background: rgba(34, 211, 238, 0.5);
        }
        
        .chat-message { 
            max-width: 85%; 
            padding: 0.875rem 1.125rem; 
            border-radius: 1.25rem; 
            margin-bottom: 0.75rem;
            word-wrap: break-word;
            animation: messageSlideIn 0.3s ease-out;
        }
        
        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .chat-message code {
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
        }
        
        .chat-message strong {
            font-weight: 600;
            color: #22d3ee;
        }
        
        .chat-message em {
            font-style: italic;
            opacity: 0.9;
        }
        
        .chat-message.user { 
            background: linear-gradient(135deg, rgba(0, 229, 255, 0.25), rgba(0, 150, 255, 0.25)); 
            color: #e0f2fe; 
            align-self: flex-end; 
            border-bottom-right-radius: 0.375rem; 
        }
        
        .chat-message.bot { 
            background: rgba(15, 23, 42, 0.8); 
            color: #cbd5e1; 
            align-self: flex-start; 
            border-bottom-left-radius: 0.375rem; 
        }
        
        .typing-indicator {
            padding: 0.875rem 1.125rem;
            animation: typingFadeIn 0.3s ease-out;
        }
        
        @keyframes typingFadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        #chatbot-input { 
            width: 100%; 
            border: 1px solid rgba(0, 229, 255, 0.3); 
            background: rgba(15, 23, 42, 0.6); 
            padding: 0.875rem 3rem 0.875rem 1.25rem; 
            color: #e0f2fe; 
            border-radius: 1.5rem; 
        }
        
        #chatbot-input:focus { 
            outline: none; 
            border-color: rgba(0, 229, 255, 0.6); 
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.2); 
        }
        
        #chat-send-btn {
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        #chat-send-btn:hover {
            background: rgba(0, 229, 255, 0.2) !important;
            border-color: rgba(0, 229, 255, 0.5) !important;
        }
        
        /* MENU HAMBURGER GLASSMORPHIQUE */
        .hamburger-btn {
            background: rgba(10, 50, 60, 0.25);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 200, 220, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .hamburger-btn:hover {
            background: rgba(10, 50, 60, 0.35);
            border-color: rgba(0, 200, 220, 0.4);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }
        
        .hamburger-dropdown {
            background: rgba(10, 40, 50, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 200, 220, 0.3);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }
        
        .hamburger-dropdown.is-open {
            transform: scale(1) opacity(1);
            pointer-events: auto;
        }
        
        .menu-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem 1rem;
            border-radius: 0.75rem;
            color: var(--text-primary);
            text-decoration: none;
            transition: all 0.3s ease;
            background: rgba(10, 50, 60, 0.2);
            border: 1px solid transparent;
        }
        
        .menu-item:hover {
            background: rgba(0, 200, 220, 0.15);
            border-color: rgba(0, 200, 220, 0.3);
            transform: translateX(4px);
            box-shadow: 0 4px 15px rgba(0, 200, 220, 0.2);
        }
        
        .menu-item.active {
            background: rgba(0, 200, 220, 0.25);
            border-color: rgba(0, 200, 220, 0.5);
            color: #00e5ff;
            box-shadow: 0 0 20px rgba(0, 200, 220, 0.3);
        }
        
        .menu-item svg {
            transition: all 0.3s ease;
        }
        
        .menu-item:hover svg {
            transform: scale(1.1);
            color: #00e5ff;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            /* Cacher le bouton chat quand le chat est ouvert en mobile */
            #chatbot-window.is-open ~ #chatbot-button {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                pointer-events: none !important;
                transform: scale(0) !important;
            }
            .stat-card { 
                padding: 1rem; 
                gap: 0.75rem; 
                min-height: 80px;
                justify-content: flex-start;
                animation: statFloat 4s ease-in-out infinite;
            }
            .stat-card:hover {
                transform: translateY(-5px) scale(1.02);
            }
            .stat-icon { 
                padding: 0.5rem; 
                width: 2.5rem; 
                height: 2.5rem;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .stat-icon svg { 
                width: 1.25rem; 
                height: 1.25rem; 
            }
            .stat-title { 
                font-size: 0.75rem; 
                line-height: 1.1;
                margin-bottom: 0.25rem;
            }
            .stat-value { 
                font-size: 1.25rem; 
                line-height: 1.1;
                word-break: break-all;
            }
            .stats-grid {
                gap: 0.75rem;
            }
            
            .main-filter-btn {
                padding: 0.5rem 1rem;
                font-size: 0.8rem;
                margin: 0.25rem;
            }
            
            #main-filters {
                gap: 0.5rem;
                padding: 0 1rem;
            }
            
            #chatbot-button {
                bottom: 1.5rem; right: 1.5rem;
                width: 60px; height: 60px;
                z-index: 1001;
                box-shadow: 0 8px 25px rgba(0, 229, 255, 0.5);
            }
            
            /* Cacher complètement le bouton chat quand la fenêtre est ouverte */
            #chatbot-window.is-open ~ #chatbot-button {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                pointer-events: none !important;
                transform: scale(0) !important;
            }
            
            #chatbot-button:hover {
                transform: scale(1.05);
                box-shadow: 0 12px 35px rgba(0, 229, 255, 0.7);
            }
            
            #chatbot-window {
                position: fixed !important;
                top: 0 !important; 
                left: 0 !important; 
                right: 0 !important; 
                bottom: 0 !important;
                width: 100vw !important; 
                height: 100vh !important;
                height: 100dvh !important;
                border-radius: 0 !important;
                transform: translateX(100%) !important;
                max-width: none !important; 
                max-height: none !important;
                margin: 0 !important;
                z-index: 1000;
            }
            
            /* Cacher complètement le bouton chat quand la fenêtre est ouverte en mobile */
            #chatbot-window.is-open ~ #chatbot-button {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                pointer-events: none !important;
                transform: scale(0) !important;
            }
            
            #chatbot-window.is-open {
                transform: translateX(0) !important;
            }
            
            #chatbot-header {
                padding: 1rem 1.5rem;
                background: rgba(10, 30, 40, 0.95);
                backdrop-filter: blur(20px);
            }
            
            #chatbot-messages {
                padding: 1rem 1.25rem;
                gap: 0.5rem;
                padding-bottom: 2rem;
                background: rgba(10, 30, 40, 0.9);
            }
            
            .chat-message {
                max-width: 90%;
                font-size: 14px;
                padding: 0.75rem 1rem;
                margin-bottom: 0.75rem;
            }
            
            .chat-message.user {
                margin-left: auto;
                margin-right: 0;
            }
            
            .chat-message.bot {
                margin-left: 0;
                margin-right: auto;
            }
            
            #chatbot-input {
                font-size: 16px !important;
                padding: 1rem 3rem 1rem 1.5rem;
                background: rgba(15, 23, 42, 0.8);
                border: 1px solid rgba(0, 229, 255, 0.4);
            }
            
            #chat-send-btn {
                width: 40px;
                height: 40px;
                right: 0.5rem;
            }
            
            #chat-send-btn:hover {
                background: rgba(0, 229, 255, 0.2) !important;
                border-color: rgba(0, 229, 255, 0.5) !important;
            }
            
            footer {
                padding: 1rem 1.5rem;
                background: rgba(10, 30, 40, 0.95);
            }
            
            .quick-actions {
                padding: 0.75rem 1.5rem !important;
                gap: 6px !important;
                background: rgba(10, 30, 40, 0.9);
            }
            
            .quick-btn {
                font-size: 11px !important;
                padding: 6px 10px !important;
                white-space: nowrap;
            }
        }
        
        @media (max-width: 480px) {
            .stat-card { 
                padding: 0.75rem; 
                gap: 0.5rem; 
                min-height: 70px;
                animation: statFloat 4s ease-in-out infinite;
            }
            .stat-card:hover {
                transform: translateY(-3px) scale(1.01);
            }
            .stat-icon { 
                padding: 0.375rem; 
                width: 2rem; 
                height: 2rem;
            }
            .stat-icon svg { 
                width: 1rem; 
                height: 1rem; 
            }
            .stat-title { 
                font-size: 0.7rem; 
            }
            .stat-value { 
                font-size: 1.1rem; 
            }
        }
        
        @media (max-width: 414px) {
            #chatbot-window {
                height: 100vh !important;
                height: -webkit-fill-available !important;
            }
            
            .chat-message {
                font-size: 14px;
                max-width: 82%;
            }
            
            #chatbot-input {
                font-size: 16px !important;
                padding: 0.875rem 3rem 0.875rem 1.25rem;
            }
            
            #chat-send-btn {
                width: 36px;
                height: 36px;
                right: 0.25rem;
            }
        }
        
        @media (max-width: 1024px) and (min-width: 769px) {
            #chatbot-window {
                width: 380px;
                height: 520px;
                right: 1.5rem;
                bottom: 6rem;
            }
        }
        
        .category-btn {
            background: rgba(10, 50, 60, 0.4);
            border: 1px solid rgba(0, 200, 220, 0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        .category-btn:hover {
            background: rgba(0, 220, 255, 0.15);
            border-color: rgba(0, 220, 255, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 220, 255, 0.2);
        }
        .category-btn.ring-2 {
            background: rgba(0, 220, 255, 0.2);
            border-color: rgb(34 211 238);
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.3);
            transform: translateY(-2px);
        }

        .quick-btn {
            background: rgba(34, 211, 238, 0.1);
            border: 1px solid rgba(34, 211, 238, 0.2);
            color: #22d3ee;
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .quick-btn:hover {
            background: rgba(34, 211, 238, 0.2);
            transform: scale(1.05);
        }
        
        /* NAVIGATION */
        .nav-link {
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 500;
            font-size: 0.875rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: #94a3b8;
        }
        
        .nav-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            color: #e0e6e7;
        }
        
        .nav-link.active {
            background: rgba(0, 220, 255, 0.2);
            border: 1px solid rgba(0, 220, 255, 0.4);
            color: #00e5ff;
            box-shadow: 0 0 20px rgba(0, 220, 255, 0.3);
        }
        
        /* Style spécial pour le bouton rollback dans le menu */
        .menu-item.rollback-item {
            color: #fb923c !important;
            border: 1px solid rgba(251, 146, 60, 0.3);
            background: rgba(251, 146, 60, 0.1);
        }
        .menu-item.rollback-item:hover {
            color: #f97316 !important;
            background: rgba(251, 146, 60, 0.2);
            border-color: rgba(251, 146, 60, 0.5);
            box-shadow: 0 0 15px rgba(251, 146, 60, 0.3);
        }

        .no-tailwind-warning { display: none !important; }
    </style>
    <script>
        if (typeof console !== 'undefined') {
            const originalWarn = console.warn;
            console.warn = function(...args) {
                if (!args[0] || !args[0].includes('cdn.tailwindcss.com should not be used in production')) {
                    originalWarn.apply(console, args);
                }
            };
        }
    </script>
</head>
<body class="h-full">
    <div class="min-h-screen p-4 md:p-8">
        <header class="text-center mb-12 pt-12">
            <div class="flex justify-center mb-6">
                 <img src="/static/1da6a1fb-f4c3-401c-aa60-63e9b63360b0.png" alt="BONVIN Logo" class="w-80 h-auto md:w-96">
            </div>
            <h1 class="text-4xl md:text-5xl font-bold mb-4 tracking-wider">INVENTAIRE PRIVÉ</h1>
        </header>
        
        <!-- Menu Hamburger Glassmorphique -->
        <div class="fixed top-6 right-6 z-50">
            <button id="hamburger-menu" class="hamburger-btn glass glowing-element p-3 rounded-xl transition-all duration-300 hover:scale-105" onclick="toggleHamburgerMenu()">
                <svg class="w-6 h-6 text-cyan-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
            
            <!-- Menu déroulant -->
            <div id="hamburger-dropdown" class="hamburger-dropdown glass-dark glowing-element absolute top-full right-0 mt-3 rounded-2xl p-4 min-w-64 transform scale-95 opacity-0 pointer-events-none transition-all duration-300 origin-top-right">
                <div class="space-y-3">
                    <a href="/" class="menu-item active">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                        </svg>
                        <span>Collection</span>
                    </a>
                    <a href="/analytics" class="menu-item">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        <span>Analytics</span>
                    </a>
                    <a href="/reports" class="menu-item">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <span>Rapports</span>
                    </a>
                    <button onclick="generatePDF()" class="menu-item w-full text-left">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <span>Générer PDF</span>
                    </button>
                    
                    <!-- Séparateur -->
                    <div class="border-t border-cyan-900/30 my-3"></div>
                    
                    <!-- Actions d'import -->
                    <button onclick="openImportModal()" class="menu-item w-full text-left">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                        <span>Importer CSV</span>
                    </button>
                    
                    <button onclick="openRollbackModal()" class="menu-item rollback-item w-full text-left">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>
                        </svg>
                        <span>Rollback CSV</span>
                    </button>
                    
                    <button onclick="forceUpdateStockPrices()" class="menu-item w-full text-left">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                        <span>Mettre à jour les prix d'actions</span>
                    </button>
                    

                    
                    <button onclick="fixVehicleCategories()" class="menu-item w-full text-left text-red-400 hover:text-red-300">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                        </svg>
                        <span>Corriger catégories 'Véhicules' → 'Voitures'</span>
                    </button>
                </div>
            </div>
        </div>
        
        <main>
            <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-12 stats-grid">
                <div class="stat-card glass glowing-element"><div class="stat-icon"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div><div><div class="stat-title">TOTAL OBJETS</div><div id="stat-total" class="stat-value">-</div></div></div>
                <div class="stat-card glass glowing-element"><div class="stat-icon"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><div class="stat-title">DISPONIBLES</div><div id="stat-disponibles" class="stat-value">-</div></div></div>
                <div class="stat-card glass glowing-element"><div class="stat-icon"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4z"></path></svg></div><div><div class="stat-title">VENDUS</div><div id="stat-vendus" class="stat-value">-</div></div></div>
                <div class="stat-card glass glowing-element golden-card"><div class="stat-icon golden-icon"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><div><div class="stat-title golden-text">VALEUR DISPONIBLE</div><div id="stat-valeur-dispo" class="stat-value golden-value">-</div></div></div>
                <div class="stat-card glass glowing-element"><div class="stat-icon"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg></div><div><div class="stat-title">VALEUR DES VENTES FINALISÉES</div><div id="stat-valeur-vente" class="stat-value">-</div></div></div>
                <div class="stat-card glass glowing-element"><div class="stat-icon"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><div><div class="stat-title">ÂGE MOYEN</div><div id="stat-age-moyen" class="stat-value">-</div></div></div>
            </section>
            
            <div class="mb-8 p-6 glass-dark glowing-element">
                <div id="main-filters" class="mb-6 flex justify-center items-center gap-4 flex-wrap">
                    <button onclick="filterByMainStatus('all')" class="main-filter-btn filter-all" data-main-status="all">
                        Tous (<span id="count-all">0</span>)
                    </button>
                    <button onclick="filterByMainStatus('Available')" class="main-filter-btn filter-available" data-main-status="Available">
                        Disponibles (<span id="count-available">0</span>)
                    </button>
                    <button onclick="filterByMainStatus('ForSale')" class="main-filter-btn filter-for-sale" data-main-status="ForSale">
                        En Vente (<span id="count-for-sale">0</span>)
                    </button>
                    <button onclick="filterByMainStatus('Sold')" class="main-filter-btn filter-sold" data-main-status="Sold">
                        Vendus (<span id="count-sold">0</span>)
                    </button>
                </div>
                
                <div id="category-filters" class="mt-6 pt-6 border-t border-cyan-900/20 flex justify-center flex-wrap gap-3">
                </div>
            </div>

            <!-- Recherche -->
            <section class="glass-dark p-6 mb-8 glowing-element">
                <div class="relative">
                    <input type="text" id="search-input" oninput="handleSearch()" placeholder="Rechercher dans la collection..." class="w-full glass rounded-xl px-4 py-3 pl-12 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400 transition-all">
                    <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>
            </section>

            <section class="mb-8 flex justify-center gap-4">
                <button id="view-btn-cards" onclick="setViewMode('cards')" class="view-btn glass px-4 py-2 rounded-lg text-sm font-medium transition-all hover:scale-105">
                    <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>
                    Cartes
                </button>
                <button id="view-btn-list" onclick="setViewMode('list')" class="view-btn glass px-4 py-2 rounded-lg text-sm font-medium transition-all hover:scale-105">
                    <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg>
                    Liste
                </button>
            </section>

            <section id="items-container" class="mb-8">
            </section>
        </main>
    </div>
    
    <div id="chatbot-button" class="glass glowing-element" onclick="toggleChatbot()">
        <svg class="w-8 h-8 text-cyan-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
    </div>

    <div id="chatbot-window" class="glass-dark">
        <header id="chatbot-header" class="p-5 border-b border-b-[var(--glass-border)] flex justify-between items-center">
            <h3 class="font-bold text-lg">Assistant BONVIN</h3>
            <button id="chatbot-close" onclick="toggleChatbot()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
        </header>
        <div id="chatbot-messages" class="flex-grow p-5 overflow-y-auto flex flex-col gap-4">
            <div class="chat-message bot">Bonjour, c'est l'assistant de la gestion d'inventaires de la famille Bonvin.</div>
        </div>
        <footer class="p-4 border-t border-t-[var(--glass-border)]">
            <form onsubmit="handleChatSubmit(event)" class="flex items-center gap-3">
                <div class="flex-1 relative">
                    <input type="text" id="chatbot-input" placeholder="Posez votre question..." autocomplete="off" class="w-full pr-12">
                    <button type="submit" id="chat-send-btn" class="absolute right-2 top-1/2 transform -translate-y-1/2 glass-subtle hover:glass p-2 rounded-full transition-all duration-300">
                        <svg class="w-5 h-5 text-cyan-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="transform: rotate(90deg);">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                        </svg>
                    </button>
                </div>
            </form>
        </footer>
    </div>

    <!-- Modal for Item Creation/Edit -->
    <div id="item-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="modal-content rounded-3xl p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 id="modal-title" class="text-2xl font-bold">Nouvel Objet</h2>
                <button onclick="closeModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            
            <form id="item-form" class="space-y-6">
                <input type="hidden" id="item-id">
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold mb-2">Nom *</label>
                        <input type="text" id="item-name" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" required>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold mb-2">Catégorie</label>
                        <select id="item-category" class="w-full glass rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-400">
                            <option value="">Sélectionner...</option>
                            <option value="Voitures">Voitures</option>
                            <option value="Montres">Montres</option>
                            <option value="Bateaux">Bateaux</option>
                            <option value="Avions">Avions</option>
                            <option value="Appartements / maison">Appartements / maison</option>
                            <option value="Be Capital">Be Capital</option>
                            <option value="Start-ups">Start-ups</option>
                            <option value="Art">Art</option>
                            <option value="Bijoux">Bijoux</option>
                            <option value="Actions">Actions</option>
                            <option value="Vins">Vins</option>
                        </select>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold mb-2">Statut</label>
                        <select id="item-status" class="w-full glass rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-400">
                            <option value="Available">Disponible</option>
                            <option value="Sold">Vendu</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold mb-2">État</label>
                        <select id="item-condition" class="w-full glass rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-400">
                            <option value="">Sélectionner...</option>
                            <option value="Neuf">Neuf</option>
                            <option value="Excellent">Excellent</option>
                            <option value="Très bon">Très bon</option>
                            <option value="Bon">Bon</option>
                            <option value="Correct">Correct</option>
                        </select>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold mb-2">Année de construction</label>
                        <input type="number" id="item-year" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" min="1800" max="2030">
                    </div>
                    <div class="flex items-center">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" id="item-for-sale" class="w-5 h-5 text-cyan-400 bg-transparent border-gray-300 rounded focus:ring-cyan-400">
                            <span class="text-sm font-semibold">Objet en vente</span>
                        </label>
                    </div>
                </div>

                <div id="sale-progress-section" style="display: none;" class="space-y-4 p-4 glass-subtle rounded-xl">
                    <h3 class="text-lg font-semibold text-cyan-300">Suivi de la Vente</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">Statut de la vente</label>
                            <select id="item-sale-status" class="w-full glass rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-400">
                                <option value="initial">Initial - Mise en vente</option>
                                <option value="presentation">Préparation présentation</option>
                                <option value="intermediary">Choix intermédiaires</option>
                                <option value="inquiries">Premières demandes</option>
                                <option value="viewing">Visites programmées</option>
                                <option value="negotiation">En négociation</option>
                                <option value="offer_received">Offre reçue</option>
                                <option value="offer_accepted">Offre acceptée</option>
                                <option value="paperwork">Formalités en cours</option>
                                <option value="completed">Vente finalisée</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2">Date de dernière action</label>
                            <input type="date" id="item-last-action-date" class="w-full glass rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-400">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold mb-2">Détails du progrès</label>
                        <textarea id="item-sale-progress" rows="4" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" 
                                  placeholder="Ex: Contact avec 3 acheteurs potentiels. Visite prévue jeudi. Négociation en cours sur le prix..."></textarea>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">Contact principal</label>
                            <input type="text" id="item-buyer-contact" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" 
                                   placeholder="Nom ou société de l'acheteur">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2">Intermédiaire(s)</label>
                            <input type="text" id="item-intermediary" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" 
                                   placeholder="Nom de l'agent/courtier">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">        
                        <div>
                            <label class="block text-sm font-semibold mb-2">Offre en cours (CHF)</label>
                            <input type="number" id="item-current-offer" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" 
                                   step="0.01" placeholder="Montant de l'offre">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2">Commission (%)</label>
                            <input type="number" id="item-commission-rate" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" 
                                   step="0.1" min="0" max="20" placeholder="% commission">
                        </div>
                    </div>
                </div>
                
                <div id="surface-field" style="display: none;">
                    <label class="block text-sm font-semibold mb-2">Surface (m²)</label>
                    <input type="number" id="item-surface" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" step="0.1">
                </div>
                
                <div id="rental-income-field" style="display: none;">
                    <label class="block text-sm font-semibold mb-2">Revenus locatifs (CHF/mois)</label>
                    <input type="number" id="item-rental-income" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" step="0.01">
                </div>
                
                <!-- Champs pour les actions -->
                <div id="stock-fields" style="display: none;" class="space-y-4 p-4 glass-subtle rounded-xl">
                    <h3 class="text-lg font-semibold text-cyan-300">Informations Boursières</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">Symbole boursier *</label>
                            <input type="text" id="item-stock-symbol" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" 
                                   placeholder="Ex: AAPL, MSFT, NESN.SW">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2">Nombre d'actions</label>
                            <input type="number" id="item-stock-quantity" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" 
                                   step="1" min="1">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2">Prix d'achat par action (CHF)</label>
                            <input type="number" id="item-stock-purchase-price" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" 
                                   step="0.01">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2">Bourse</label>
                            <select id="item-stock-exchange" class="w-full glass rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-400">
                                <option value="">Sélectionner...</option>
                                <option value="US">US (NYSE/NASDAQ)</option>
                                <option value="SIX">Suisse (SIX)</option>
                                <option value="XETRA">Allemagne (XETRA)</option>
                                <option value="EPA">France (Euronext Paris)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="p-3 bg-blue-500/10 border border-blue-400/30 rounded-lg">
                        <p class="text-sm text-blue-300">💡 Le prix actuel sera automatiquement mis à jour via l'API boursière</p>
                    </div>
                </div>
                
                <!-- Champ prix actuel manuel pour les actions -->
                <div id="current-price-field" style="display: none;" class="mt-4 p-4 bg-cyan-900/20 border border-cyan-500/30 rounded-xl">
                    <h3 class="text-lg font-semibold text-cyan-400 mb-3">Prix actuel (optionnel)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                        <div>
                            <label class="block text-sm font-semibold mb-2">Prix actuel (CHF/action)</label>
                            <input type="number" id="item-current-price" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" step="0.01" placeholder="Prix manuel si mise à jour auto échoue">
                        </div>
                        <div>
                            <button type="button" id="update-current-price-btn" class="glowing-element glass px-4 py-3 rounded-xl text-sm hover:scale-105 transition-transform w-full">
                                Calculer la valeur totale
                            </button>
                        </div>
                        <div class="text-sm text-gray-400">
                            Utilisez ce champ si la mise à jour automatique échoue
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-semibold mb-2">Prix d'acquisition (CHF)</label>
                        <input type="number" id="item-acquisition-price" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" step="0.01">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold mb-2">Valeur actuelle (CHF)</label>
                        <input type="number" id="item-current-value" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" step="0.01">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold mb-2">Prix de vente (CHF)</label>
                        <input type="number" id="item-sold-price" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" step="0.01">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold mb-2">Description</label>
                    <textarea id="item-description" rows="4" class="w-full glass rounded-xl px-4 py-3 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-400" placeholder="Description détaillée de l'objet..."></textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold mb-2">Localisation</label>
                    <select id="item-location" class="w-full glass rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-400">
                        <option value="">Sélectionner une localisation...</option>
                        <option value="St-Sulpice">St-Sulpice</option>
                        <option value="Genève">Genève</option>
                        <option value="Schindellegi">Schindellegi</option>
                        <option value="Crans">Crans</option>
                        <option value="Sion">Sion</option>
                        <option value="Anzère">Anzère</option>
                        <option value="St-Tropez">St-Tropez</option>
                        <option value="Marbella">Marbella</option>
                        <option value="London">London</option>
                        <option value="Zurich">Zurich</option>
                        <option value="Autre">Autre</option>
                    </select>
                </div>
                
                <div class="flex gap-4 justify-end pt-4">
                    <button type="button" onclick="closeModal()" class="px-6 py-3 glass rounded-xl font-medium hover:scale-105 transition-transform">Annuler</button>
                    <button type="submit" class="px-6 py-3 bg-cyan-600 hover:bg-cyan-700 rounded-xl font-medium transition-colors">Sauvegarder</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Price Estimation -->
    <div id="estimation-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="modal-content rounded-3xl p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Estimation IA</h2>
                <button onclick="closeEstimationModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            
            <div id="estimation-content-body">
            </div>
        </div>
    </div>

    <!-- Modal for CSV Import -->
    <div id="import-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="modal-content rounded-3xl p-8 max-w-2xl w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Importer CSV</h2>
                <button onclick="closeImportModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            
            <div class="space-y-6">
                <div class="p-4 glass-subtle rounded-xl">
                    <h3 class="text-lg font-semibold text-cyan-300 mb-3">Attention</h3>
                    <p class="text-sm text-gray-300 mb-3">
                        Cette action va <strong>supprimer toutes les voitures existantes (catégorie "Véhicules")</strong> et les remplacer par les données du CSV.
                    </p>
                    <p class="text-sm text-red-400">
                        Cette action est irréversible !
                    </p>
                </div>
                
                <form id="import-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-semibold mb-2">Fichier CSV</label>
                        <input type="file" id="csv-file" accept=".csv" class="w-full glass rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-400" required>
                    </div>
                    
                    <div class="p-3 bg-blue-500/10 border border-blue-400/30 rounded-lg">
                        <p class="text-sm text-blue-300">
                            <strong>Format attendu :</strong> Le CSV doit contenir les colonnes : name, category, status, condition, description, location, current_value, acquisition_price, sold_price, construction_year, for_sale, etc.
                        </p>
                        <p class="text-sm text-blue-300 mt-2">
                            <a href="/template_import_voitures.csv" download class="text-cyan-400 hover:underline">Télécharger le template CSV</a>
                        </p>
                    </div>
                    
                    <div class="flex gap-4 justify-end pt-4">
                        <button type="button" onclick="closeImportModal()" class="px-6 py-3 glass rounded-xl font-medium hover:scale-105 transition-transform">Annuler</button>
                        <button type="submit" class="px-6 py-3 bg-red-600 hover:bg-red-700 rounded-xl font-medium transition-colors">Importer et remplacer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal for CSV Rollback -->
    <div id="rollback-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="modal-content rounded-3xl p-8 max-w-2xl w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Rollback CSV</h2>
                <button onclick="closeRollbackModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            
            <div class="space-y-6">
                <div class="p-4 bg-red-500/10 border border-red-400/30 rounded-xl">
                    <h3 class="text-lg font-semibold text-red-400 mb-3">⚠️ ROLLBACK COMPLET</h3>
                    <p class="text-sm text-gray-300 mb-3">
                        Cette action va <strong>supprimer TOUTES les données existantes</strong> et les remplacer par les données du CSV de sauvegarde.
                    </p>
                    <p class="text-sm text-red-400 font-bold">
                        ATTENTION : Cette action supprime TOUS les objets, pas seulement les voitures !
                    </p>
                </div>
                
                <form id="rollback-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-semibold mb-2">Fichier CSV de sauvegarde</label>
                        <input type="file" id="rollback-csv-file" accept=".csv" class="w-full glass rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-400" required>
                    </div>
                    
                    <div class="p-3 bg-orange-500/10 border border-orange-400/30 rounded-lg">
                        <p class="text-sm text-orange-300">
                            <strong>Utilisez ce bouton uniquement pour restaurer vos données de sauvegarde !</strong>
                        </p>
                        <p class="text-sm text-orange-300 mt-2">
                            Assurez-vous que votre CSV contient toutes les données que vous voulez restaurer.
                        </p>
                    </div>
                    
                    <div class="flex gap-4 justify-end pt-4">
                        <button type="button" onclick="closeRollbackModal()" class="px-6 py-3 glass rounded-xl font-medium hover:scale-105 transition-transform">Annuler</button>
                        <button type="submit" class="px-6 py-3 bg-orange-600 hover:bg-orange-700 rounded-xl font-medium transition-colors">Restaurer toutes les données</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal pour la sélection de véhicule IA -->
    <div id="vehicle-select-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="modal-content rounded-3xl p-8 max-w-lg w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Sélectionner un véhicule pour mise à jour IA</h2>
                <button onclick="closeVehicleSelectModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            
            <div class="space-y-6">
                <div>
                    <label class="block text-sm font-semibold mb-2">Véhicule</label>
                    <select id="vehicle-select" class="w-full glass rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-400 text-white">
                        <option value="">Sélectionnez un véhicule...</option>
                    </select>
                </div>
                
                <div id="vehicle-details" class="p-4 glass-subtle rounded-xl hidden">
                    <h4 class="font-medium mb-3 text-cyan-300">Détails du véhicule</h4>
                    <div id="vehicle-info" class="text-sm text-gray-300 space-y-2"></div>
                </div>
                
                <div class="p-3 bg-blue-500/10 border border-blue-400/30 rounded-lg">
                    <p class="text-sm text-blue-300">
                        <strong>Mise à jour IA :</strong> L'IA analysera le marché actuel et calculera une nouvelle estimation de prix basée sur les données récentes.
                    </p>
                </div>
                
                <div class="flex gap-4 justify-end pt-4">
                    <button onclick="closeVehicleSelectModal()" class="px-6 py-3 glass rounded-xl font-medium hover:scale-105 transition-transform">Annuler</button>
                    <button onclick="confirmAiUpdate()" id="confirm-ai-btn" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-xl font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        Mettre à jour via IA
                    </button>
                </div>
            </div>
        </div>
    </div>

    <button onclick="openCreateModal()" class="fixed bottom-6 left-6 w-14 h-14 glass glowing-element rounded-full flex items-center justify-center hover:scale-110 transition-transform z-50">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
    </button>

    <script src="/static/script.js"></script>
    
    <script>
        // Fonction pour gérer le menu hamburger
        function toggleHamburgerMenu() {
            const dropdown = document.getElementById('hamburger-dropdown');
            const isOpen = dropdown.classList.contains('is-open');
            
            if (isOpen) {
                dropdown.classList.remove('is-open');
                dropdown.style.transform = 'scale(0.95)';
                dropdown.style.opacity = '0';
                dropdown.style.pointerEvents = 'none';
            } else {
                dropdown.classList.add('is-open');
                dropdown.style.transform = 'scale(1)';
                dropdown.style.opacity = '1';
                dropdown.style.pointerEvents = 'auto';
            }
        }
        
        // Fermer le menu si on clique ailleurs
        document.addEventListener('click', function(event) {
            const hamburgerMenu = document.getElementById('hamburger-menu');
            const dropdown = document.getElementById('hamburger-dropdown');
            
            if (!hamburgerMenu.contains(event.target) && !dropdown.contains(event.target)) {
                dropdown.classList.remove('is-open');
                dropdown.style.transform = 'scale(0.95)';
                dropdown.style.opacity = '0';
                dropdown.style.pointerEvents = 'none';
            }
        });
        
        // Fermer le menu après avoir cliqué sur un lien
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function() {
                setTimeout(() => {
                    const dropdown = document.getElementById('hamburger-dropdown');
                    dropdown.classList.remove('is-open');
                    dropdown.style.transform = 'scale(0.95)';
                    dropdown.style.opacity = '0';
                    dropdown.style.pointerEvents = 'none';
                }, 100);
            });
        });
    </script>
</body>
</html>
